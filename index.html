<!doctype html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SolarCurve - Estimation photovoltaïque</title>
    <link rel="stylesheet" href="styles.css" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  </head>
  <body>
    <main class="container">
      <header>
        <h1>SolarCurve</h1>
        <p>Estimation de la production photovoltaïque quotidienne sur l'année.</p>
      </header>

      <section class="card">
        <form id="pv-form" class="form-grid">
          <label>
            Latitude
            <input id="lat" name="lat" type="number" step="0.0001" required placeholder="ex: 42.7" />
          </label>

          <label>
            Longitude
            <input id="lon" name="lon" type="number" step="0.0001" required placeholder="ex: 9.45" />
          </label>

          <label>
            Puissance (kWc)
            <input id="peakPower" name="peakPower" type="number" step="0.1" min="0.1" value="1" required />
          </label>

          <label>
            Inclinaison (°)
            <input id="tilt" name="tilt" type="number" min="0" max="90" value="30" required />
          </label>

          <label>
            Azimut (°)
            <input id="azimuth" name="azimuth" type="number" min="-180" max="180" value="0" required />
            <small>Convention app : 0=sud, -90=est, +90=ouest</small>
          </label>

          <label>
            Pertes (%)
            <input id="losses" name="losses" type="number" min="0" max="100" step="0.1" value="14" required />
          </label>

          <label>
            API source
            <select id="source" name="source">
              <option value="pvgis" selected>PVGIS (recommandé Europe/Corse)</option>
              <option value="pvwatts">PVWatts (NREL)</option>
            </select>
          </label>

          <label id="pvwatts-key-wrapper" class="hidden">
            Clé API PVWatts
            <input id="pvwattsKey" name="pvwattsKey" type="text" placeholder="Votre clé NREL" />
          </label>

          <div class="actions">
            <button id="geo-btn" type="button">Utiliser ma position</button>
            <button id="estimate-btn" type="submit">Estimer la courbe annuelle</button>
          </div>
        </form>
      </section>

      <section class="card">
        <div id="status" class="status">Prêt.</div>
        <div id="stats" class="stats"></div>
        <canvas id="productionChart" height="110"></canvas>
      </section>
    </main>

    <script src="app.js"></script>
  </body>
</html>
